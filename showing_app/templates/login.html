{% extends 'base.html' %}
{% load static %}


{% block contents %}
<style>
     #popup {
        display: flex;
        justify-content: center;
        align-items: center;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, .7);
        z-index: 1;
      }

      #popup.hide {
        display: none;
      }

      #popup.has-filter {
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
      }

      #popup .content {
        padding: 20px;
        background: #fff;
        border-radius: 5px;
        box-shadow: 1px 1px 3px rgba(0, 0, 0, .3);
      }

</style>
<body class="is-preload">
    <div id='wrapper'>
        <!-- Header -->
					<header id="header">
						<div class="">
							<img style="width:20%;" src="{% static 'images/DBU.png' %}" alt="" />
						</div>
						<div class="content">
							<div class="inner">
								<h1>ë¦¬ë”ë“¤ì€ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</h1>
								<p>ë©¤ë²„ë“¤ì˜ ì¶œì„ì²´í¬ë¥¼ ìœ„í•œ í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.</p>
                                <form id="login_form" >
                                    <div class="fields">
                                        <div class="field">
                                            <label for="message">ğŸ‘€PASSCODEğŸ‘€</label>
                                            <input id="pass" type="text" name="passcode" placeholder="íŒ¨ìŠ¤ì½”ë“œì…ë ¥í•´ì£¼ì„¸ìš”" />
                                        </div>
                                    
                                    </div>
                                    <ul class="actions">
                                        <li><input id="send" type="button" value="Send it" class="primary" /></li>
                                        <li><input type="reset" value="Reset" /></li>
                                    </ul>
                                </form>
							</div>
                            
						</div>
						
							<ul class="icons">
                                <li><a href="https://www.instagram.com/done_by_us/" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
                                <li><a href="#" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
                            </ul>
						
					</header>

                     <!--modal popup page-->
                    <div id="popup" class="hide">
                        <div class="content">
                        <p id="notify" style="color:black">
                            ì—¬ê¸°ì— íŒì—…ì°½ ë‚´ìš©ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
                        </p>
                        
                        <button style="background-color:#ff4545b0 ;border:solid 3px; border-color:#000000fc; color:black;font-size: 0.7em;" onclick="closePopup()">ë‹«ê¸°</button>
                        </div>
                    </div>

                    <!-- Footer -->
					<footer id="footer">
						<p class="copyright">&copy; Developed by ChoMinsu.</p>
					</footer>

        </div>
        


    <div id="bg"></div>

    <script>

        $(function(){
            $('#send').on("click",function () {
    
                var login = $("#login_form").serialize();

                //alert(login);
    
                //console.log(login);
                $.ajax({
                    type: "POST",
                    url: "{% url 'login' %}",
                    data: JSON.stringify(login),
                    dataType: 'json',
                    success: function (data) {
                        //alert("success");
                        console.log(data.result);
                        if(data.result==true){
                            showPopup(true);
                            $("#notify").text("ğŸ˜í™˜ì˜í•©ë‹ˆë‹¤ ë¦¬ë”ë‹˜!");
                            state=true;
                        }
                        else{
                            console.log("ì •ë³´ê°€ í‹€ë¦°ë°..");
                            showPopup(true);
                            $("#notify").text("ğŸ™„íŒ¨ìŠ¤ì½”ë“œê°€ í‹€ë¦½ë‹ˆë‹¤...ë‹¤ì‹œì…ë ¥í•´ì£¼ì„¸ìš”.");
                            state=false;
                        }
                    },
                    error: function (request, status, error) {
                        console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
    
                    }
                });
            });
        });
        
        function showPopup(hasFilter) {
            const popup = document.querySelector('#popup');
            
            if (hasFilter) {
            popup.classList.add('has-filter');
            } else {
            popup.classList.remove('has-filter');
            }
            
            popup.classList.remove('hide');
        }

        function closePopup() {
            const popup = document.querySelector('#popup');
            popup.classList.add('hide');
            if (state==true){
                window.location.href="home/";
            }
            else{
                window.location.href="{% url 'login_render' %}";
            }
        }
    </script>



</body>
{% endblock %}